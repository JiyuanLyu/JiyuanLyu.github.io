---
layout: post
title: Blog Post 2
---

In this blog post, I'll create a simple webapp using Flask and describe how I did it. 

The app built in this blog post later is a simple message bank, which allows:

1. the user to submit messages to the bank.

2. the user to view a sample of the messages currently stored in the bank.

In addition, to make the app look better and more readable, I'll use CSS for the app development.

The code for this app is hosted in a Github repository at https://github.com/JiyuanLyu/pic-flask. 

# 1. Enable Submissions

In this part, I'll use Flask fundamentals skills.

First of all, create a `submit` template with three user interface elements:
1. A text box for submitting a message.
2. A text box for submitting the name of the user.
3. A “submit” button.

To do this, I put navigation links inside a template called `base.html` and then use the template `submit.html` to extend `base.html`. 

The codes for the html documents are shown below.

## `base.html`

```
# Create the base.html template
# The base.html is shown below


<!doctype html>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
# Edit the title fo the webapp
<title>{% block title %}{% endblock %} - Jiyuan's Message Bank</title>
<nav>
  <h1>Jiyuan's First Webapp!</h1>
  <!-- <b>Navigation:</b> -->
  <ul>
    # Edit the navigation link for user to submit messages
    <li><a href="{{ url_for('submit') }}">Submit your message</a></li>
    # Edit the navigation link for user to view messages
    <li><a href="{{ url_for('view') }}">View messages</a></li>
  </ul>
</nav>
<section class="content">
  <header>
    {% block header %}{% endblock %}
  </header>
  {% block content %}{% endblock %}
</section>
```

Then, I wrote the `submit.html` and `view.html` templates extending `base.html`.

## `submit.html`

```
# Create the submit.html template
# to extend the base.html


{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Submit{% endblock %}</h1>
{% endblock %}

{% block content %}
  <form method="post">
      # The instruction for user to type in their messages
      <label for="message">Please type your message here:</label>
      <input name="message" id="message">
      <br>
      # The instruction for user to leave their names
      <label for="name">Your name:</label>
      <input name="name" id="name">
      <br>
      # The button to submit message
      <input type="submit" value="Submit">
  </form>
  {% if thanks %}
    # The notification after users submit their messages
    Thanks! You just submit a message!
  {% endif %}
{% endblock %}
```

## `view.html`

```
# This template is for user to
# view the message in the database


{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Ask{% endblock %}</h1>
{% endblock %}

{% block content %}
  {% for m in messages %}
  <br>
  <b>{{m.0}}</b>
  <br>
  <i>{{m.1}}</i>
  <br>
  {% endfor %}
{% endblock %}
```

The basic home page of the webapp is set up. 

Now, I'll write two Python functions for database management for my message bank in `app.py`.

## `app.py`

### Import packages

First of all, import all the packages or sources that would be used later.

```
# Import the packages and the function
# render_template() (will be defined later)


from flask import Flask, g, render_template, request
import sqlite3
app = Flask(__name__)
```

### `main()`

After importing, define a `main()` function.

```
@app.route("/")
def main():
    """
    This function will return the home base page
    with render_template()
    """ 

    return render_template("base.html")
```

### `submit()`

Then, define a `submit()` function to transmit and receive the input data. Make sure that it supports both `POST` and `GET` methods.

```
@app.route('/submit/', methods=['POST', 'GET'])
def submit():
    """
    This function will use render_template()
    to submit function into the database
    """
    
    if request.method == 'GET':
        # Use render_template() to GET the message
        return render_template('submit.html')
    else:
        # Use insert_message() to INSERT the message
        # into database
        insert_message(request)
        return render_template('submit.html', thanks=True)
```

### `view()`

Define a function for user to view messages in the database.

```
@app.route('/view/')
def view():
    """
    This function will display messages with rander_template()
    from random_messages() in view.html
    """

    # Set a limit number of the shown messages
    num = 5
    # Display the limit number messages in the view.html
    shown = random_messages(num)
    return render_template('view.html', messages = shown)
```